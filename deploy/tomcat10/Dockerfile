FROM eclipse-temurin:21-jdk
ENV TOMCAT_VERSION=10.1.40

# Tomcat ì„¤ì¹˜
RUN curl -fSL https://dlcdn.apache.org/tomcat/tomcat-10/v${TOMCAT_VERSION}/bin/apache-tomcat-${TOMCAT_VERSION}.tar.gz \
    | tar -xz -C /usr/local && \
    ln -s /usr/local/apache-tomcat-${TOMCAT_VERSION} /usr/local/tomcat

# ê¸°ì¡´ ROOT í´ë” ì‚­ì œ (ìë™ ì „ê°œ ë°©í•´ ë°©ì§€)
RUN rm -rf /usr/local/tomcat/webapps/ROOT

# WAR ë³µì‚¬
COPY ROOT.war /usr/local/tomcat/webapps/ROOT.war
RUN ls -lh /usr/local/tomcat/webapps/

# ì—…ë¡œë“œ ê²½ë¡œ
RUN mkdir -p /blog_demo/uploads

EXPOSE 8080

CMD ["/bin/bash", "-c", "\
  echo 'ğŸ“¦ ROOT.war íŒŒì¼ ìƒíƒœ:' && \
  ls -lh /usr/local/tomcat/webapps/ && \
  echo 'ğŸš€ Tomcat ì‹¤í–‰ ì‹œì‘...' && \
  /usr/local/tomcat/bin/catalina.sh run"]
